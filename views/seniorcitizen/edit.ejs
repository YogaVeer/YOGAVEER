<%- layout("layouts/boilerplate") %>

<h2>Edit Lesson (Senior Citizen)</h2>

<form action="/seniorcitizen/lessons/<%= lesson._id %>?_method=PUT" method="POST">
  <div class="mb-3">
    <label for="lessonTitle" class="form-label">Lesson Title</label>
    <input type="text" class="form-control" id="lessonTitle" name="lessonTitle" value="<%= lesson.title %>" required>
  </div>

  <% if (lesson.videoPath) { %>
    <div class="mb-3">
      <label>Current Video</label><br>
      <video src="<%= lesson.videoPath %>" controls width="300"></video>
    </div>
  <% } %>

  <div class="mb-3">
    <label for="videoPath" class="form-label">Video Link (YouTube/Drive/etc.)</label>
    <input type="url" class="form-control" id="videoPath" name="videoPath" placeholder="https://..." value="<%= lesson.videoPath %>">
  </div>

  <div class="mb-3">
    <label for="sectionId" class="form-label">Select Section</label>
    <select class="form-control" id="sectionId" name="sectionId" required>
      <% sections.forEach(section => { %>
        <option value="<%= section._id %>" <%= section._id.toString() === lesson.section.toString() ? "selected" : "" %>>
          <%= section.title %>
        </option>
      <% }) %>
    </select>
  </div>

  <button type="submit" class="btn btn-dark">Update Lesson</button>
</form>
